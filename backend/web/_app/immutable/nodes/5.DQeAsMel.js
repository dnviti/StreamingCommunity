import"../chunks/DsnmJJEf.js";import"../chunks/DpJpVl5Q.js";import{o as se}from"../chunks/C6tk_fDW.js";import{s as k,h as C,K as le,g as Z,c as ne,b as fe,x as D,L as ie,r as oe,H as ve,d as Q,e as B,m as O,M as ue,N as de,i as J,k as ce,j as pe,O as z,P as _e,Q as K,R as U,S as he,l as $,p as me,T as xe,V as X,W as j,X as we,Y as be,Z as Ee,_ as ge,$ as ye,a0 as Te,a1 as Ie,D as Me,f as Y,a as V,G as Ae,B as F,I as A,a2 as q,J as M,F as W}from"../chunks/DM_xb8GE.js";import{s as L}from"../chunks/Cq-u3MM7.js";import{i as De}from"../chunks/P5MicfCu.js";import{i as Ne}from"../chunks/Dim7wJlL.js";function Ce(n,a){return a}function Re(n,a,e){for(var l=n.items,u=[],p=a.length,d=0;d<p;d++)ge(a[d].e,u,!0);var m=p>0&&u.length===0&&e!==null;if(m){var i=e.parentNode;ye(i),i.append(e),l.clear(),T(n,a[0].prev,a[p-1].next)}Te(u,()=>{for(var o=0;o<p;o++){var h=a[o];m||(l.delete(h.k),T(n,h.prev,h.next)),j(h.e,!m)}})}function He(n,a,e,l,u,p=null){var d=n,m={flags:a,items:new Map,first:null};{var i=n;d=C?k(le(i)):i.appendChild(Z())}C&&ne();var o=null,h=!1,g=new Map,t=ie(()=>{var f=e();return _e(f)?f:f==null?[]:z(f)}),c,r;function s(){Se(r,c,m,g,d,u,a,l,e),p!==null&&(c.length===0?o?$(o):o=J(()=>p(d)):o!==null&&me(o,()=>{o=null}))}fe(()=>{r??=Ie,c=D(t);var f=c.length;if(h&&f===0)return;h=f===0;let w=!1;if(C){var b=oe(d)===ve;b!==(f===0)&&(d=Q(),k(d),B(!1),w=!0)}if(C){for(var v=null,x,_=0;_<f;_++){if(O.nodeType===ue&&O.data===de){d=O,w=!0,B(!1);break}var I=c[_],y=l(I,_);x=P(O,m,v,null,I,y,_,u,a,e),m.items.set(y,x),v=x}f>0&&k(Q())}if(C)f===0&&p&&(o=J(()=>p(d)));else if(ce()){var N=new Set,E=pe;for(_=0;_<f;_+=1){I=c[_],y=l(I,_);var R=m.items.get(y)??g.get(y);R?ee(R,I,_):(x=P(null,m,null,null,I,y,_,u,a,e,!0),g.set(y,x)),N.add(y)}for(const[H,S]of m.items)N.has(H)||E.skipped_effects.add(S.e);E.add_callback(s)}else s();w&&B(!0),D(t)}),C&&(d=O)}function Se(n,a,e,l,u,p,d,m,i){var o=a.length,h=e.items,g=e.first,t=g,c,r=null,s=[],f=[],w,b,v,x;for(x=0;x<o;x+=1){if(w=a[x],b=m(w,x),v=h.get(b),v===void 0){var _=l.get(b);if(_!==void 0){l.delete(b),h.set(b,_);var I=r?r.next:t;T(e,r,_),T(e,_,I),G(_,I,u),r=_}else{var y=t?t.e.nodes_start:u;r=P(y,e,r,r===null?e.first:r.next,w,b,x,p,d,i)}h.set(b,r),s=[],f=[],t=r.next;continue}if(ee(v,w,x),(v.e.f&X)!==0&&$(v.e),v!==t){if(c!==void 0&&c.has(v)){if(s.length<f.length){var N=f[0],E;r=N.prev;var R=s[0],H=s[s.length-1];for(E=0;E<s.length;E+=1)G(s[E],N,u);for(E=0;E<f.length;E+=1)c.delete(f[E]);T(e,R.prev,H.next),T(e,r,R),T(e,H,N),t=N,r=H,x-=1,s=[],f=[]}else c.delete(v),G(v,t,u),T(e,v.prev,v.next),T(e,v,r===null?e.first:r.next),T(e,r,v),r=v;continue}for(s=[],f=[];t!==null&&t.k!==b;)(t.e.f&X)===0&&(c??=new Set).add(t),f.push(t),t=t.next;if(t===null)continue;v=t}s.push(v),r=v,t=v.next}if(t!==null||c!==void 0){for(var S=c===void 0?[]:z(c);t!==null;)(t.e.f&X)===0&&S.push(t),t=t.next;var ae=S.length;if(ae>0){var te=o===0?u:null;Re(e,S,te)}}n.first=e.first&&e.first.e,n.last=r&&r.e;for(var re of l.values())j(re.e);l.clear()}function ee(n,a,e,l){he(n.v,a),n.i=e}function P(n,a,e,l,u,p,d,m,i,o,h){var g=(i&we)!==0,t=(i&be)===0,c=g?t?K(u,!1,!1):U(u):u,r=(i&xe)===0?d:U(d),s={i:r,v:c,k:p,a:null,e:null,prev:e,next:l};try{if(n===null){var f=document.createDocumentFragment();f.append(n=Z())}return s.e=J(()=>m(n,c,r,o),C),s.e.prev=e&&e.e,s.e.next=l&&l.e,e===null?h||(a.first=s):(e.next=s,e.e.next=s.e),l!==null&&(l.prev=s,l.e.prev=s.e),s}finally{}}function G(n,a,e){for(var l=n.next?n.next.e.nodes_start:e,u=a?a.e.nodes_start:e,p=n.e.nodes_start;p!==null&&p!==l;){var d=Ee(p);u.before(p),p=d}}function T(n,a,e){a===null?n.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}var Oe=Y('<p class="text-red-500"> </p>'),Ve=Y('<tr><td class="w-1/3 text-left py-3 px-4"> </td><td class="w-1/3 text-left py-3 px-4"> </td><td class="text-left py-3 px-4"> </td></tr>'),Fe=Y('<div class="overflow-x-auto"><table class="min-w-full bg-white"><thead class="bg-gray-800 text-white"><tr><th class="w-1/3 text-left py-3 px-4 uppercase font-semibold text-sm">ID</th><th class="w-1/3 text-left py-3 px-4 uppercase font-semibold text-sm">Video ID</th><th class="text-left py-3 px-4 uppercase font-semibold text-sm">Status</th></tr></thead><tbody class="text-gray-700"></tbody></table></div>'),Le=Y('<div class="container mx-auto p-4"><h1 class="text-2xl font-bold mb-4">Downloads</h1> <!></div>');function Ke(n,a){Me(a,!1);let e=K([]),l=K("");se(async()=>{try{const i=await fetch("http://localhost:8080/downloads");if(!i.ok)throw new Error("Failed to fetch downloads");q(e,await i.json())}catch(i){i instanceof Error?q(l,i.message):q(l,"An unknown error occurred")}}),Ne();var u=Le(),p=F(A(u),2);{var d=i=>{var o=Oe(),h=A(o,!0);M(o),W(()=>L(h,D(l))),V(i,o)},m=i=>{var o=Fe(),h=A(o),g=F(A(h));He(g,5,()=>D(e),Ce,(t,c)=>{var r=Ve(),s=A(r),f=A(s,!0);M(s);var w=F(s),b=A(w,!0);M(w);var v=F(w),x=A(v,!0);M(v),M(r),W(()=>{L(f,D(c).id),L(b,D(c).video_id),L(x,D(c).status)}),V(t,r)}),M(g),M(h),M(o),V(i,o)};De(p,i=>{D(l)?i(d):i(m,!1)})}M(u),V(n,u),Ae()}export{Ke as component};
