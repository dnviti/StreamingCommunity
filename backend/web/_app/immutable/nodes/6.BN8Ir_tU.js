import"../chunks/DsnmJJEf.js";import"../chunks/DpJpVl5Q.js";import{h as p,at as A,au as L,av as M,aw as N,ax as O,ah as R,t as I,ay as D,j as c,az as j,D as C,f as k,x as f,a as g,G as U,B as h,I as v,J as m,n as F,Q as x,a2 as u,F as J}from"../chunks/DM_xb8GE.js";import{e as P,s as V}from"../chunks/Cq-u3MM7.js";import{i as B}from"../chunks/P5MicfCu.js";import{i as G}from"../chunks/Dim7wJlL.js";const H=Symbol("is custom element"),q=Symbol("is html");function z(e){if(p){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;S(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var o=e.checked;S(e,"checked",null),e.checked=o}}};e.__on_r=t,A(t),L()}}function S(e,a,t,s){var o=K(e);p&&(o[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||o[a]!==(o[a]=t)&&(a==="loading"&&(e[M]=t),e.removeAttribute(a))}function K(e){return e.__attributes??={[H]:e.nodeName.includes("-"),[q]:e.namespaceURI===N}}function Q(e,a,t=a){var s=new WeakSet;O(e,"input",async o=>{var r=o?e.defaultValue:e.value;if(r=_(e)?b(r):r,t(r),c!==null&&s.add(c),await R(),r!==(r=a())){var l=e.selectionStart,i=e.selectionEnd;e.value=r??"",i!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(i,e.value.length))}}),(p&&e.defaultValue!==e.value||I(a)==null&&e.value)&&(t(_(e)?b(e.value):e.value),c!==null&&s.add(c)),D(()=>{var o=a();if(e===document.activeElement){var r=j??c;if(s.has(r))return}_(e)&&o===b(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function _(e){var a=e.type;return a==="number"||a==="range"}function b(e){return e===""?null:+e}function W(e){return function(...a){var t=a[0];return t.preventDefault(),e?.apply(this,a)}}var Y=k('<p class="mt-4 text-green-500"> </p>'),X=k('<div class="container mx-auto p-4"><h1 class="text-2xl font-bold mb-4">Submit a new download</h1> <form><div class="mb-4"><label for="url" class="block text-gray-700 text-sm font-bold mb-2">Video URL</label> <input type="text" id="url" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Enter video URL"/></div> <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button></form> <!></div>');function re(e,a){C(a,!1);let t=x(""),s=x("");async function o(){try{const n=await fetch("http://localhost:8080/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:f(t)})});if(!n.ok)throw new Error("Failed to create video");const d=await n.json();if(!(await fetch("http://localhost:8080/downloads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_id:d.id,status:"pending"})})).ok)throw new Error("Failed to create download");u(s,"Download submitted successfully!"),u(t,"")}catch(n){n instanceof Error?u(s,n.message):u(s,"An unknown error occurred")}}G();var r=X(),l=h(v(r),2),i=v(l),y=h(v(i),2);z(y),m(i),F(2),m(l);var E=h(l,2);{var T=n=>{var d=Y(),w=v(d,!0);m(d),J(()=>V(w,f(s))),g(n,d)};B(E,n=>{f(s)&&n(T)})}m(r),Q(y,()=>f(t),n=>u(t,n)),P("submit",l,W(o)),g(e,r),U()}export{re as component};
